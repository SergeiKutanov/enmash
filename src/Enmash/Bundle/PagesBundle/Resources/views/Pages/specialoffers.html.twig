{% extends 'EnmashPagesBundle:Base:public_base.html.twig' %}

    {% block customcss %}
        {{ parent() }}
        <style>



            .isotope-container .item {
                /*width: 23%;*/
                background-color: #EEEEEE;
                margin: 5px;
                border: 1px solid #555555;
                box-shadow: 5px 5px 0px 0px #555555;
                -webkit-transition: all 0.5s ease;
                -moz-transition: all 0.5s ease;
                -o-transition: all 0.5s ease;
                -ms-transition: all 0.5s ease;
                transition: all 0.5s ease;
            }

            .isotope-container .item:hover {
                box-shadow: 0px 0px 0px 0px #555555;
            }

            .isotope-container .item img {
                width: 100%;
            }

            .isotope-container .item .offer-title {
                text-align: center;
            }

            .isotope-container .offer-title, #isotope-container .offer-body {
                padding: 5px;
            }

            .isotope-container p.asterisk {
                font-size: .9em;
            }

            @media (min-width: 992px) {

                .isotope-container {
                    display: table;
                    border-spacing: 10px;
                }
                .isotope-container div[class^="col"] {
                    display: table-cell;
                    float: none;
                    width: initial;
                    vertical-align: top;
                    padding: 0;
                    width: 25%;
                }

                .isotope-container .table-row {
                    display: table-row;
                }
            }
        </style>
        <link rel="stylesheet" href="//blueimp.github.io/Gallery/css/blueimp-gallery.min.css">
        <link rel="stylesheet" href="{{ asset('vendor/blueimp-bootstrap-image-gallery/css/bootstrap-image-gallery.min.css') }}">
    {% endblock %}

    {% block content %}
        {% include 'EnmashPagesBundle:Pages:Blocks/gallerymodal.html.twig' %}
        <div class="row pusher">
            <div class="col-xs-12">
                <h1>Скидки и специальные предложения</h1>
            </div>
            {% if bonus is not null %}
            <div class="col-xs-12">
                <div>
                    <h2>{{ bonus.title }}</h2>
                </div>
                {{ bonus.body | raw }}
                <hr>
            </div>
            {% endif %}

            {% if offers | length > 0 %}
            <div class="col-xs-12">
                <h2>Специальные предложения</h2>
                <div id="isotope-container" class="isotope-container">
                    {% for offer in offers %}
                    {% if loop.index is divisibleby(5) or loop.index == 1 %}
                    <div class="table-row">
                    {% endif %}
                    {% include 'EnmashPagesBundle:Pages:Blocks/SpecialOffers/specialoffer.html.twig' with {'offer': offer}%}
                    {% if loop.index is divisibleby(4) %}
                    </div>
                    {% endif %}
                    {% endfor %}
                    {% if offers | length is not divisibleby(4) %}
                </div>
                    {% endif %}
                </div>
                <hr>
            </div>
            {% endif %}

            {% if discounts | length > 0 %}
            <div class="col-xs-12">
                <h2>Скидки</h2>
                <div id="discount-isotope-container" class="isotope-container">
                    {% for discount in discounts %}
                    {% if loop.index is divisibleby(5) or loop.index == 1 %}
                    <div class="table-row">
                    {% endif %}
                        {% include 'EnmashPagesBundle:Pages:Blocks/SpecialOffers/specialoffer.html.twig' with {'offer': discount} %}
                    {% if loop.index is divisibleby(4) %}
                        </div>
                    {% endif %}
                    {% endfor %}
                    {% if offers | length is not divisibleby(4) %}
                </div>
                    {% endif %}
            </div>
            </div>
            {% endif %}

        </div>
    {% endblock %}

    {% block js %}
        {{ parent() }}
        <script src="{{ asset('vendor/isotope/dist/isotope.pkgd.min.js') }}"></script>
        <script src="//blueimp.github.io/Gallery/js/jquery.blueimp-gallery.min.js"></script>
        <script src="{{ asset('vendor/blueimp-bootstrap-image-gallery/js/bootstrap-image-gallery.min.js') }}"></script>
        <script type="text/javascript">
//            $(document).ready(function(){
//                var $isotopeContainer = $('#isotope-container');
//                $isotopeContainer.isotope({
//                    itemSelector: '.item',
//                    layoutMode: 'masonry',
//                    gutter: 5
//                });
//
//                var $discountIsotopContainer = $('#discount-isotope-container');
//                $discountIsotopContainer.isotope({
//                    itemSelector: '.item',
//                    layoutMode: 'masonry',
//                    gutter: 5
//                });
//            });
        </script>
    {% endblock %}