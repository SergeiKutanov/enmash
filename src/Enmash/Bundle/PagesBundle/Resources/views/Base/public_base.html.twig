<!DOCTYPE html>
<html>
<head>
    <title>Enmash Store</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {% block css %}
    <link rel="stylesheet" type="text/css" href="{{ asset('vendor/bootstrap/dist/css/bootstrap.min.css') }}">
    {% endblock %}

    {% block customcss %}
    {% stylesheets 'bundles/enmashpages/css/*' filter='cssrewrite' %}
    <link rel="stylesheet" href="{{ asset_url }}" />
    {% endstylesheets %}
    {% endblock %}
    <script type="text/javascript" src="{{ asset('vendor/jquery/dist/jquery.min.js') }}"></script>
</head>
<body class="{% block body_class %}{% endblock %}">

    {% block modals %}
        {% include('EnmashPagesBundle:Pages:Blocks/modals/findstoremap.html.twig') %}
    {% endblock %}

    {% block top_menu %}
    {#top menu#}
    {% include('EnmashPagesBundle:Pages:Blocks/top_menu.html.twig') %}
    {% endblock %}

    {% block jumbotron %}
    {% endblock %}
    <div class="container">
        {% block content %}
        {% endblock %}
    </div>

    {% block footer %}
    {% include ('EnmashPagesBundle:Pages:Blocks/footer.html.twig') %}
    {% endblock %}

    {% block js %}
    <script type="text/javascript" src="{{ asset('vendor/bootstrap/dist/js/bootstrap.min.js') }}"></script>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" src="{{ asset('bundles/enmashpages/js/functions.js') }}"></script>

        <script type="text/javascript">

            $(document).ready(function(){

                var map = null;

                $('#find-store-map').on('shown.bs.modal', function(e){
                    if (map == null) {

                        var iconPath = $('#find-store-map').attr('data-icon-path');

                        $.ajax({
                            method: 'POST',
                            data: {
                                'type' : $('#find-store-map').attr('data-type')
                            },
                            url: $('#find-store-map').attr('data-map-points-path'),
                            success: function(data) {
                                initializeFindStoreMap(data, iconPath);
                            }
                        });
                    }
                })
            });

        </script>
    {% endblock %}
</body>
</html>